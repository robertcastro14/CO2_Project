{% extends 'base.html' %}
{% load static %}

{% block content %}
<main id="calculator-app" class="wrap" role="main" aria-labelledby="calc-title">
    
    <section class="card hero" aria-labelledby="calc-title">
        <h2 id="calc-title">Calcule sua emissÃ£o de COâ‚‚</h2>
        <p class="small">Insira a distÃ¢ncia e escolha o meio â€” a estimativa Ã© baseada em fatores mÃ©dios por km.</p>

        <form class="calc" method="POST">
            {% csrf_token %}
            
            <div>
                <label class="input-label" for="distance">DistÃ¢ncia (km)
                    <span class="small">Ex.: 12.5</span>
                </label>
                <input id="distance" name="distancia" type="number" min="0" step="0.1" inputmode="decimal" placeholder="Ex: 12.5" required />
            </div>

            <div>
                <label class="input-label" for="mode">Meio de transporte</label>
                <select id="mode" name="transporte" required>
                    <option value="">â€” selecione â€”</option>
                    <option value="bicicleta">ğŸš² Bicicleta</option>
                    <option value="caminhada">ğŸš¶ A pÃ© (Caminhada)</option>
                    <option value="onibus">ğŸšŒ Transporte PÃºblico (Ã”nibus/MetrÃ´)</option>
                    <option value="moto">ğŸï¸ Moto</option>
                    <option value="carro">ğŸš— Carro (CombustÃ£o)</option>
                </select>
            </div>

            <div class="btn-row">
                <button type="submit" class="primary" aria-live="polite">Calcular</button>
                <button type="reset" class="ghost">Limpar</button>
            </div>
            
            {% if resultado %}
            <div class="result" role="status" aria-atomic="true">
                <div>
                    <div class="small">EmissÃ£o estimada</div>
                    <div class="value">{{ resultado.emissao_kg }} kg COâ‚‚</div>
                </div>
                <div style="text-align:right">
                    <div class="small">CompensaÃ§Ã£o anual</div>
                    <div style="font-weight:700; color: var(--calc-primary-600);">{{ resultado.arvores }} Ãrvores</div>
                </div>
            </div>
            {% endif %}
            
        </form>
    </section>

    <aside class="aside">
        <div class="card card-aside">
            <h3 style="margin:0;color:var(--calc-primary-600)">RecomendaÃ§Ãµes rÃ¡pidas</h3>
            <p class="small" style="margin-top:6px">Para trajetos <strong>atÃ© 3 km</strong>, prefira bicicleta ou caminhada.</p>

            <div class="modes">
                <div class="mode best">
                    <i class="bi bi-bicycle" style="font-size: 32px; color: var(--calc-secondary-color);"></i>
                    <div><h4>Bicicleta â€” 0 kg</h4><p class="small">Melhor para curtas distÃ¢ncias</p></div>
                </div>

                <div class="mode">
                    <i class="bi bi-train-front" style="font-size: 32px; color: var(--calc-secondary-color);"></i>
                    <div><h4>Transporte PÃºblico â€” baixo</h4><p class="small">Eficiente em lotaÃ§Ãµes altas</p></div>
                </div>

                <div style="display:flex;justify-content:center;margin-top:8px">
                    <a href="{% url 'historico' %}" class="ghost" style="text-decoration:none;padding:8px 12px;border-radius:10px; color: var(--calc-primary-600);">Ver Meu HistÃ³rico</a>
                </div>
            </div>
        </div>
    </aside>

</main>
{% endblock content %}