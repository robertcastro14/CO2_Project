<!-- index.html -->
<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>EcoJourney — Calculadora de CO₂</title>

<!-- META para redes sociais / SEO mínimo -->
<meta name="description" content="Calculadora visual de emissões de CO₂ por percurso — compare meios de transporte e escolha o mais eficiente." />

<style>
  :root{
    --bg-1: #eaf7ee;
    --primary-600:#0f5132;
    --primary-500:#198754;
    --accent: #f3c677;
    --card-bg: #ffffff;
    --muted: #6b7a6b;
    --glass: rgba(255,255,255,0.6);
    --radius: 16px;
    --max-width:1100px;
    --shadow-1: 0 8px 30px rgba(6,40,22,0.12);
    --transition: 240ms cubic-bezier(.2,.9,.3,1);
  }

  /* Reset moderno e tipografia */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, var(--bg-1) 0%, #f7fff6 50%);
    color: #052d1b;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:36px 20px;
    display:flex;
    justify-content:center;
  }

  /* Layout centralizado */
  .wrap{
    width:100%;
    max-width: var(--max-width);
    display:grid;
    grid-template-columns: 1fr 420px;
    gap:36px;
    align-items:start;
    align-content:start;
  }

  /* Header */
  header.site-header{
    grid-column: 1 / -1;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:18px;
    margin-bottom:6px;
  }
  .brand{
    display:flex;
    gap:14px;
    align-items:center;
  }
  .logo{
    width:56px;height:56px;border-radius:12px;
    display:grid;place-items:center;
    background:linear-gradient(135deg,var(--primary-600),var(--primary-500));
    box-shadow: 0 6px 18px rgba(10,50,30,0.28);
  }
  .logo svg{width:32px;height:32px;filter:drop-shadow(0 6px 12px rgba(0,0,0,0.08));}
  .brand h1{font-size:20px;margin:0;line-height:1;color:white;font-weight:700}
  .brand p{margin:0;font-size:12px;color:#dff6e3}

  nav.top-nav a{
    text-decoration:none;color:var(--primary-600);
    margin-left:18px;font-weight:600;
  }

  /* Card principal */
  .card{
    background:linear-gradient(180deg,var(--card-bg), #fbfff9);
    border-radius: var(--radius);
    padding:26px;
    box-shadow: var(--shadow-1);
    border: 1px solid rgba(10,50,30,0.04);
  }

  /* Left column: calculadora com destaque visual */
  .hero{
    display:flex;flex-direction:column;gap:14px;
  }
  .hero h2{margin:0;font-size:28px;color:var(--primary-600)}
  .hero p{margin:0;color:var(--muted)}

  form.calc{
    display:grid;
    gap:12px;
    margin-top:12px;
  }
  label.input-label{
    display:flex;justify-content:space-between;align-items:center;font-size:13px;color:var(--muted);
  }

  .input-row{
    display:flex;gap:12px;
  }
  input[type="number"], select{
    -webkit-appearance:none;
    width:100%;
    padding:14px 16px;
    border-radius:12px;
    border:1px solid #d7ead6;
    background: linear-gradient(180deg,#fbfffb,#f3fff6);
    font-size:15px;
    transition: box-shadow var(--transition), transform var(--transition);
  }
  input[type="number"]:focus, select:focus{
    outline:none;
    box-shadow:0 8px 20px rgba(25,135,84,0.12);
    transform:translateY(-2px);
  }

  .btn-row{display:flex;gap:12px;margin-top:6px;}
  button.primary{
    background: linear-gradient(180deg,var(--primary-500),var(--primary-600));
    color:white;border:none;padding:12px 18px;border-radius:12px;font-weight:700;
    cursor:pointer;flex:1;box-shadow: 0 10px 28px rgba(14,72,42,0.18);
    transition: transform var(--transition), box-shadow var(--transition);
  }
  button.primary:hover{transform:translateY(-4px);box-shadow:0 18px 40px rgba(12,70,42,0.24)}
  button.ghost{
    background:transparent;border:1px solid rgba(10,50,30,0.08);padding:12px 18px;border-radius:12px;cursor:pointer;
  }

  /* Resultado destacado */
  .result{
    margin-top:18px;
    display:flex;gap:18px;align-items:center;justify-content:space-between;
    padding:18px;border-radius:12px;background:linear-gradient(90deg,#f6fff7,#eefbf0);
    border:1px solid #e1f2e3;
  }
  .result .value{font-size:32px;font-weight:800;color:var(--primary-600)}
  .result .meta{color:var(--muted);font-size:13px}

  /* Right column: card com recomendações visuais */
  .aside{
    position:sticky;top:32px;
  }
  .card-aside{
    padding:18px;border-radius:14px;background:linear-gradient(180deg,#ffffff,#fbfff9);
    box-shadow: var(--shadow-1);border:1px solid rgba(10,50,30,0.04);
  }
  .modes{display:flex;flex-direction:column;gap:12px;margin-top:10px}
  .mode{
    display:flex;gap:12px;align-items:center;padding:12px;border-radius:12px;
    transition: background var(--transition), transform var(--transition);
    border:1px solid rgba(6,40,20,0.02);
    background:linear-gradient(180deg,#fff,#fcfff9);
  }
  .mode svg{width:44px;height:44px;flex-shrink:0}
  .mode h4{margin:0;font-size:15px}
  .mode p{margin:0;color:var(--muted);font-size:13px}
  .mode.best{background:linear-gradient(90deg,#eaf9ee,#e8fff1);border-color:rgba(25,135,84,0.12);transform:translateY(-2px)}

  /* small helper */
  .small{font-size:13px;color:var(--muted)}

  /* Responsividade */
  @media (max-width:980px){
    .wrap{grid-template-columns:1fr; padding-bottom:120px}
    .aside{position:relative;top:auto}
  }

  @media (max-width:520px){
    header.site-header{flex-direction:column;align-items:flex-start;gap:10px}
    .brand p{display:none}
    .card{padding:18px}
  }
</style>
</head>
<body>
  <main class="wrap" role="main" aria-labelledby="page-title">
    <header class="site-header">
      <div class="brand" aria-hidden="false">
        <div class="logo" aria-hidden="true">
          <!-- inline SVG folha -->
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M5 20C13 20 20 13 20 5" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M8 12C12 9 16 7 20 5" stroke="#bff0cf" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div>
          <h1 style="margin:0;color:var(--primary-600);font-size:18px">EcoJourney</h1>
          <p style="margin:0;font-size:12px;color:var(--muted)">Calculadora de emissões • Beta</p>
        </div>
      </div>

      <nav class="top-nav" aria-label="Navegação principal">
        <a href="index.html">Calculadora</a>
        <a href="transportes.html">Transportes</a>
        <a href="avaliacoes.html">Avaliações</a>
      </nav>
    </header>

    <!-- LEFT: calculadora -->
    <section class="card" aria-labelledby="calc-title">
      <div class="hero">
        <h2 id="calc-title">Calcule sua emissão de CO₂</h2>
        <p class="small">Insira a distância e escolha o meio — a estimativa é baseada em fatores médios por km.</p>

        <form class="calc" id="calcForm" aria-describedby="calc-desc">
          <div>
            <label class="input-label" for="distance">Distância (km)
              <span class="small" id="calc-desc">Ex.: 12.5</span>
            </label>
            <input id="distance" name="distance" type="number" min="0" step="0.1" inputmode="decimal" placeholder="Ex: 12.5" aria-required="true" />
          </div>

          <div>
            <label class="input-label" for="mode">Meio de transporte
              <button type="button" class="ghost" id="showFactors" title="Ver fatores de emissão">Fatores</button>
            </label>
            <select id="mode" name="mode" aria-required="true">
              <option value="">— selecione —</option>
              <option value="bike">Bicicleta</option>
              <option value="walk">A pé</option>
              <option value="scooter">Patinete</option>
              <option value="transit">Transporte Público (ônibus/metro)</option>
              <option value="motorcycle">Moto</option>
              <option value="ev">Carro Elétrico</option>
              <option value="car">Carro (combustão)</option>
            </select>
          </div>

          <div class="btn-row">
            <button type="button" class="primary" id="calcBtn" aria-live="polite">Calcular</button>
            <button type="reset" class="ghost" id="resetBtn">Limpar</button>
          </div>

          <div class="result" role="status" aria-atomic="true" id="resultCard" style="display:none">
            <div>
              <div class="small">Emissão estimada</div>
              <div class="value" id="co2Value">0,00 kg</div>
            </div>
            <div style="text-align:right">
              <div class="small">Sugestão</div>
              <div id="suggestion" style="font-weight:700;color:var(--primary-600)">—</div>
            </div>
          </div>
        </form>

        <div id="factorsModal" role="dialog" aria-modal="true" aria-hidden="true" style="display:none;position:fixed;inset:0;background:rgba(2,20,10,0.45);align-items:center;justify-content:center">
          <div style="max-width:720px;width:90%;background:white;padding:20px;border-radius:12px">
            <h3 style="margin-top:0">Fatores de emissão (kg CO₂ / km) — valores médios</h3>
            <ul>
              <li>Bicicleta / A pé: 0</li>
              <li>Patinete elétrico: 0.02</li>
              <li>Transporte público (ônibus/metro): 0.05</li>
              <li>Moto: 0.11</li>
              <li>Carro elétrico: 0.07 (varia conforme rede)</li>
              <li>Carro (combustão): 0.21</li>
            </ul>
            <div style="text-align:right;margin-top:12px">
              <button id="closeFactors" class="ghost">Fechar</button>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- RIGHT: recomendações -->
    <aside class="aside">
      <div class="card-aside">
        <h3 style="margin:0;color:var(--primary-600)">Recomendações rápidas</h3>
        <p class="small" style="margin-top:6px">Para trajetos <strong>até 3 km</strong>, prefira bicicleta ou caminhada. Para 3–15 km, priorize transporte público ou bicicleta elétrica.</p>

        <div class="modes">
          <div class="mode best" data-mode="bike" tabindex="0" role="button" aria-pressed="false">
            <!-- Bike icon -->
            <svg viewBox="0 0 24 24" fill="none"><circle cx="6" cy="17" r="3" stroke="#198754" stroke-width="1.5"/><circle cx="18" cy="17" r="3" stroke="#198754" stroke-width="1.5"/><path d="M6 17h6l1-4h3" stroke="#198754" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <div><h4>Bicicleta — 0 kg</h4><p class="small">Melhor para curtas distâncias</p></div>
          </div>

          <div class="mode" data-mode="transit" tabindex="0">
            <svg viewBox="0 0 24 24" fill="none"><rect x="3" y="5" width="18" height="10" rx="2" stroke="#4b7a5f" stroke-width="1.5"/><path d="M8 17v1" stroke="#4b7a5f" stroke-width="1.6"/></svg>
            <div><h4>Transporte Público — baixo</h4><p class="small">Eficiente em lotações altas</p></div>
          </div>

          <div style="display:flex;justify-content:center;margin-top:8px">
            <a href="transportes.html" class="ghost" style="text-decoration:none;padding:8px 12px;border-radius:10px">Ver comparação detalhada</a>
          </div>
        </div>
      </div>
    </aside>

  </main>

<script>
  // Fatores médios em kg CO2/km (exemplo)
  const FACTORS = {
    "bike": 0,
    "walk": 0,
    "scooter": 0.02,
    "transit": 0.05,
    "motorcycle": 0.11,
    "ev": 0.07,
    "car": 0.21
  };

  const distanceEl = document.getElementById('distance');
  const modeEl = document.getElementById('mode');
  const calcBtn = document.getElementById('calcBtn');
  const resultCard = document.getElementById('resultCard');
  const co2Value = document.getElementById('co2Value');
  const suggestion = document.getElementById('suggestion');
  const showFactors = document.getElementById('showFactors');
  const factorsModal = document.getElementById('factorsModal');
  const closeFactors = document.getElementById('closeFactors');

  function formatKg(n){
    return n.toLocaleString('pt-BR', {minimumFractionDigits:2, maximumFractionDigits:2}) + ' kg CO₂';
  }

  calcBtn.addEventListener('click', () => {
    const dist = parseFloat(distanceEl.value);
    const mode = modeEl.value;
    if (!isFinite(dist) || dist <= 0){
      distanceEl.focus();
      distanceEl.setAttribute('aria-invalid','true');
      alert('Insira uma distância válida (km).');
      return;
    }
    if (!mode){
      modeEl.focus();
      modeEl.setAttribute('aria-invalid','true');
      alert('Selecione um meio de transporte.');
      return;
    }
    const factor = FACTORS[mode] ?? 0.2;
    const co2 = factor * dist;
    resultCard.style.display = 'flex';
    co2Value.textContent = formatKg(co2);

    // sugestão simples: recomendar modo com menor fator disponível (bike/walk/transit)
    let best = 'Bicicleta';
    if (dist > 3) best = 'Transporte Público';
    suggestion.textContent = best;
  });

  closeFactors.addEventListener('click', () => {
    factorsModal.style.display='none';
    factorsModal.setAttribute('aria-hidden','true');
  });
  showFactors.addEventListener('click', () => {
    factorsModal.style.display='flex';
    factorsModal.setAttribute('aria-hidden','false');
  });

  // limpar avisos a reset
  document.getElementById('resetBtn').addEventListener('click', () => {
    resultCard.style.display='none';
    distanceEl.removeAttribute('aria-invalid');
    modeEl.removeAttribute('aria-invalid');
  });

  // small keyboard accessibility: click modes
  Array.from(document.querySelectorAll('.mode')).forEach(node=>{
    node.addEventListener('click', ()=> {
      const m = node.dataset.mode;
      // fake select highlight & set
      modeEl.value = (m === 'transit') ? 'transit' : (m === 'bike' ? 'bike' : modeEl.value);
      node.classList.add('best');
      setTimeout(()=>node.classList.remove('best'),700);
    });
  });
</script>
</body>
</html>
